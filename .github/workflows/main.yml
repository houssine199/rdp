name: Linux Desktop RDP

on:
  workflow_dispatch:

jobs:
  run-linux:
    runs-on: ubuntu-latest
    timeout-minutes: 360   # ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¨ÙƒØ±ØŒ ÙˆÙŠØ¨Ù‚ÙŠÙ‡ 6 Ø³Ø§Ø¹Ø§Øª

    steps:
    - name: Update System
      run: sudo apt update -y

    - name: Install Desktop + RDP
      run: |
        sudo apt install xfce4 xfce4-goodies xrdp -y
        sudo systemctl enable xrdp
        sudo systemctl restart xrdp
        
        sudo adduser rdpuser --disabled-password --gecos ""
        echo "rdpuser:123456" | sudo chpasswd
        sudo usermod -aG sudo rdpuser

    - name: Allow RDP port (3389)
      run: |
        sudo ufw allow 3389/tcp || true

    - name: Display connection info
      run: |
        echo "================================="
        echo "âœ… RDP READY"
        echo "Server IP: $(curl -s https://ipinfo.io/ip)"
        echo "Username: rdpuser"
        echo "Password: 123456"
        echo "Port: 3389"
        echo "================================="

    - name: Keep session alive
      run: |
        echo "ðŸ”’ Keeping RDP session alive..."
        while true; do
          sleep 60
        done
